<div class="shadow-2 border-round w-full lg:w-4 mx-auto product-survey-page">
    @if(!isStarted){
    <div class="container p-4 mb-5">
        <div class=" hover:surface-hover my-3 mx-2 bg-white transition-all transition-duration-200">
            <div class=" p-2 gap-3">
                <div class="m-2">
                    <span class="pi pi-angle-left cursor-pointer" (click)="navigate('/product-detail')"></span>
                </div>
                <div class="w-full flex justify-content-center">
                    <img class="bg-white" src="/assets/images/image.png"
                        style="height: 140px;width: 140px; border-radius: 50%;object-fit: contain;" />
                </div>
                <div class="flex-1 flex align-items-center flex-column gap-1">
                    <span class="font-bold py-2">
                        Sita Pharmacy
                    </span>
                    <div class="flex align-items-center gap-2 py-2 mx-4">
                        <i class="pi pi-map-marker text-sm"></i>
                        <span class="text-sm">
                            Nivea Cellular Luminous 630Â° Anti Dark-Spot Advanced Treatment Serum - 30ml
                        </span>
                    </div>
                </div>
                <span class="text-700 ml-5 capitalize">
                </span>
            </div>
        </div>

        <div class="mx-3">
            <h4>Product Placement Audit</h4>
        </div>
        <div>
            <div class="flex justify-content-center">
                <button pButton label="Start" class="w-4 bg-warning border-round" (click)="start()"></button>
            </div>
        </div>
    </div>
    }@else if(isCompleted){
    <div>
        <div class="my-4">
            <div class="text-center">
                <span class="pi pi-star text-3xl"></span>
            </div>
        </div>
        <h2 class="text-center">Completed</h2>
        <div class="my-4">
            <p class="text-center">Thank You</p>
        </div>
        <div class="mt-5 mb-2">
            <div class="flex justify-content-center">
                <button pButton label="Go to Product" class="w-6 bg-warning border-round"
                    (click)="navigate('/product-detail')"></button>
            </div>
        </div>
    </div>
    }@else {
    <div class="container p-4 mb-5">
        <div class=" hover:surface-hover my-3 mx-2 bg-white transition-all transition-duration-200">
            <div class="flex justify-content-between">
                @for (q of questions; track $index) {
                    <span class="bg-gray-600 stepper flex flex-1" [class.done]="q.answer!==undefined"></span>
                 }
            </div>
            <div class=" p-2 gap-3">
                <div class="m-2">
                    <span class="pi pi-angle-left cursor-pointer" (click)="navigate('/product-detail')"></span>
                </div>
                <div class="w-full flex justify-content-center">
                    <img class="bg-white" src="/assets/images/image.png"
                        style="height: 100px;width: 100px; border-radius: 50%;object-fit: contain;" />
                </div>

                @if (questions.length) {
                <div>
                    <h4>{{questions[step].quetion}}</h4>
                    <div class="flex justify-content-around my-5 ">
                        <div class="text-center ">
                            <span class="pi thumbs-icon hover:surface-hover cursor-pointer" (click)="answer(true)"
                                [class]="questions[step].answer==true?'pi-thumbs-up-fill green':'pi-thumbs-up'">

                            </span>
                        </div>
                        <div class="text-center ">
                            <span class="pi thumbs-icon hover:surface-hover cursor-pointer" (click)="answer(false)"
                                [class]="questions[step].answer==false ?'pi-thumbs-down-fill red':'pi-thumbs-down'">

                            </span>
                        </div>
                    </div>
                    <div class="mt-5 mb-5">
                        <div class="flex justify-content-center">
                            <button pButton label="Continue" class="w-4 bg-warning border-round"
                                (click)="changeStep()"></button>
                        </div>
                    </div>
                    @if(questions[step].answer==true){
                        <div class="flex flex-wrap">
                            @for(img of images;track $index){
                                <div class="answer-image">
                                    <img [src]="img" />
                                </div>
                            }
                            <div class="answer-image">
                                <label for="file" class="">
                                    <span class="pi pi-plus"></span>
                                    <input type="file" accept=".jpg,.jpeg,.png" (change)="selectFileChange($event)" multiple class="hidden" id="file" />
                                </label>
                            </div>
                        </div>
                    }
                </div>
                }
            </div>
        </div>
    </div>
    }
</div>